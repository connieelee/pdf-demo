# pdf-demo

## What is this?

This is a simplified demo of the `reports-pdf-service`, which I built at [Tempus](https://www.tempus.com). It's a basic [Express](https://expressjs.com) server that generates PDFs from JSON data using [Puppeteer](https://developers.google.com/web/tools/puppeteer) (headless Chrome) and [React](https://reactjs.org).

[Here](https://www.tempus.com/wp-content/uploads/2019/06/Sample-Report_Anil_190521.pdf) is a sample clinical report generated by the actual `reports-pdf-service`.


## Getting started

- `npm i`
- `npm run build`
- `npm start`
- Try it out!

```json
POST http://localhost:3000/report-pdfs

{
  "patientInfo": {
    "fullName": "Jane Doe",
    "birthDate": "01/01/2020"
  },
  "variants": ["TP53", "AR", "CDKN2A", "TMPRSS2 - ERG"],
  "therapies": ["Palbociclib", "Rucaparib + Radiation", "AZD1775"]
}
```

## Development

Ultimately, the service simply renders static content in a Chrome window. This means we can leverage Chrome and its fantastic devtools during development!

To develop PDF contents,
- `npm run build:watch`
- In a separate terminal, `npm run start:watch`
- Open Chrome and go to `localhost:3000`
- Open dev console and call `renderReport` with the sample JSON above (see "Getting started" section)
- Make changes in `/react-app` and save (automatically updates bundle/server)
- Refresh Chrome page and re-render

To get PDF output,
- Option 1: use `POST` route
- Option 2: save to PDF in Chrome
  - After rendering PDF contents in browser, press `command + P` to open the print dialog
  - For "Destination", select "Save to PDF"
  - Under "More settings", set "Margins" to "None" and enable "Background graphics"
  - Save and inspect output
